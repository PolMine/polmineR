<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Perform chisquare-text. — chisquare • polmineR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Perform chisquare-text. — chisquare" />
<meta property="og:description" content="Perform Chisquare-Test based on a table with counts" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">polmineR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/OpenCPU.html">OpenCPU</a>
    </li>
    <li>
      <a href="../articles/vignette.html">Introducing the 'polmineR'-package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/PolMine/polmineR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Perform chisquare-text.</h1>
    <small class="dont-index">Source: <a href='https://github.com/PolMine/polmineR/blob/master/R/stats.R'><code>R/stats.R</code></a></small>
    <div class="hidden name"><code>chisquare-method.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Perform Chisquare-Test based on a table with counts</p>
    </div>

    <pre class="usage"><span class='fu'>chisquare</span>(<span class='no'>.Object</span>)

<span class='co'># S4 method for features</span>
<span class='fu'>chisquare</span>(<span class='no'>.Object</span>)

<span class='co'># S4 method for context</span>
<span class='fu'>chisquare</span>(<span class='no'>.Object</span>)

<span class='co'># S4 method for cooccurrences</span>
<span class='fu'>chisquare</span>(<span class='no'>.Object</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.Object</th>
      <td><p>A <code>features</code> object, or an object inheriting from it
(<code>context</code>, <code>cooccurrences</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Same class as input object, with enriched table in the
  <code>stat</code>-slot.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The basis for computing for the chi square test is a contingency table of
observationes, which is prepared for every single token in the corpus. It
reports counts for a token to inspect and all other tokens in a corpus of
interest (coi) and a reference corpus (ref):</p><table class='table'>
<tr><td></td><td>coi</td><td>ref</td><td>TOTAL</td></tr>
<tr><td>count token</td><td>\(o_{11}\)</td><td>\(o_{12}\)</td><td>\(r_{1}\)</td></tr>
<tr><td>other tokens</td><td>\(o_{21}\)</td><td>\(o_{22}\)</td><td>\(r_{2}\)</td></tr>
<tr><td>TOTAL</td><td>\(c_{1}\)</td><td>\(c_{2}\)</td><td>N</td></tr>
</table>
<p>Based on the contingency table, expected values are calculated for each cell,
as the product of the column and margin sums, divided by the overall number
of tokens (see example). The standard formula for calculating the chi-square
test is computed as follows. $$X^{2} = \sum{\frac{(O_{ij} -
E_{ij})^2}{O_{ij}}}$$
Results from the chisquare test are only robust for at least 5 observed
counts in the corpus of interest. Usually, results need to be filtered
accordingly (see examples).</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Manning, Christopher D.; Schuetze, Hinrich (1999):
  <em>Foundations of Statistical Natural Language Processing</em>. MIT Press:
  Cambridge, Mass., pp. 169-172.</p>
<p>Kilgarriff, A. and Rose, T. (1998): Measures for corpus
  similarity and homogeneity. <em>Proc. 3rd Conf. on Empirical Methods in
  Natural Language Processing</em>. Granada, Spain, pp 46-52.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other statistical methods: 
<code><a href='ll.html'>ll</a>()</code>,
<code><a href='pmi.html'>pmi</a>()</code>,
<code><a href='t_test.html'>t_test</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='use.html'>use</a></span>(<span class='st'>"polmineR"</span>)</div><div class='output co'>#&gt; <span class='message'>... activating corpus: GERMAPARLMINI (version: 0.0.1 | build date: 2019-02-23)</span></div><div class='output co'>#&gt; <span class='message'>... activating corpus: REUTERS</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>data.table</span>)
<span class='no'>m</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='partition.html'>partition</a></span>(
  <span class='st'>"GERMAPARLMINI"</span>, <span class='kw'>speaker</span> <span class='kw'>=</span> <span class='st'>"Merkel"</span>, <span class='kw'>interjection</span> <span class='kw'>=</span> <span class='st'>"speech"</span>,
  <span class='kw'>regex</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>p_attribute</span> <span class='kw'>=</span> <span class='st'>"word"</span>
)</div><div class='output co'>#&gt; <span class='message'>... get encoding: latin1</span></div><div class='output co'>#&gt; <span class='message'>... get cpos and strucs</span></div><div class='output co'>#&gt; <span class='message'>... getting counts for p-attribute(s): word</span></div><div class='input'><span class='no'>f</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='features.html'>features</a></span>(<span class='no'>m</span>, <span class='st'>"GERMAPARLMINI"</span>, <span class='kw'>included</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>f_min</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='subset.html'>subset</a></span>(<span class='no'>f</span>, <span class='no'>count_coi</span> <span class='kw'>&gt;=</span> <span class='fl'>5</span>)
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>f_min</span>)</div><div class='output co'>#&gt;        p critical_value N_chisquare
#&gt; 1: 0.001          10.83          60
#&gt; 2: 0.005           7.88          77
#&gt; 3: 0.010           6.63          80
#&gt; 4: 0.050           3.84         113</div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {

<span class='co'># A sample do-it-yourself calculation for chisquare:</span>

<span class='co'># (a) prepare matrix with observed values</span>
<span class='no'>o</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>NA</span>, <span class='fl'>4</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>o</span>[<span class='fl'>1</span>,<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html'>as.data.table</a></span>(<span class='no'>m</span>)[<span class='no'>word</span> <span class='kw'>==</span> <span class='st'>"Weg"</span>]<span class='kw'>[[</span><span class='st'>"count"</span>]]
<span class='no'>o</span>[<span class='fl'>1</span>,<span class='fl'>2</span>] <span class='kw'>&lt;-</span> <span class='fu'><a href='count-method.html'>count</a></span>(<span class='st'>"GERMAPARLMINI"</span>, <span class='kw'>query</span> <span class='kw'>=</span> <span class='st'>"Weg"</span>)<span class='kw'>[[</span><span class='st'>"count"</span>]] - <span class='no'>o</span>[<span class='fl'>1</span>,<span class='fl'>1</span>]
<span class='no'>o</span>[<span class='fl'>2</span>,<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='fu'><a href='size-method.html'>size</a></span>(<span class='no'>f</span>)<span class='kw'>[[</span><span class='st'>"coi"</span>]] - <span class='no'>o</span>[<span class='fl'>1</span>,<span class='fl'>1</span>]
<span class='no'>o</span>[<span class='fl'>2</span>,<span class='fl'>2</span>] <span class='kw'>&lt;-</span> <span class='fu'><a href='size-method.html'>size</a></span>(<span class='no'>f</span>)<span class='kw'>[[</span><span class='st'>"ref"</span>]] - <span class='no'>o</span>[<span class='fl'>1</span>,<span class='fl'>2</span>]


<span class='co'># prepare matrix with expected values, calculate margin sums first</span>

<span class='no'>r</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowSums</a></span>(<span class='no'>o</span>)
<span class='no'>c</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>colSums</a></span>(<span class='no'>o</span>)
<span class='no'>N</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>o</span>)

<span class='no'>e</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='kw'>data</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>NA</span>, <span class='fl'>4</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='no'>e</span>[<span class='fl'>1</span>,<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='no'>r</span>[<span class='fl'>1</span>] * (<span class='no'>c</span>[<span class='fl'>1</span>] / <span class='no'>N</span>)
<span class='no'>e</span>[<span class='fl'>1</span>,<span class='fl'>2</span>] <span class='kw'>&lt;-</span> <span class='no'>r</span>[<span class='fl'>1</span>] * (<span class='no'>c</span>[<span class='fl'>2</span>] / <span class='no'>N</span>)
<span class='no'>e</span>[<span class='fl'>2</span>,<span class='fl'>1</span>] <span class='kw'>&lt;-</span> <span class='no'>r</span>[<span class='fl'>2</span>] * (<span class='no'>c</span>[<span class='fl'>1</span>] / <span class='no'>N</span>)
<span class='no'>e</span>[<span class='fl'>2</span>,<span class='fl'>2</span>] <span class='kw'>&lt;-</span> <span class='no'>r</span>[<span class='fl'>2</span>] * (<span class='no'>c</span>[<span class='fl'>2</span>] / <span class='no'>N</span>)


<span class='co'># compute chisquare statistic</span>

<span class='no'>y</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fl'>NA</span>, <span class='fl'>4</span>), <span class='kw'>ncol</span> <span class='kw'>=</span> <span class='fl'>2</span>)
<span class='kw'>for</span> (<span class='no'>i</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>2</span>) <span class='kw'>for</span> (<span class='no'>j</span> <span class='kw'>in</span> <span class='fl'>1</span>:<span class='fl'>2</span>) <span class='no'>y</span>[<span class='no'>i</span>,<span class='no'>j</span>] <span class='kw'>&lt;-</span> (<span class='no'>o</span>[<span class='no'>i</span>,<span class='no'>j</span>] - <span class='no'>e</span>[<span class='no'>i</span>,<span class='no'>j</span>])^<span class='fl'>2</span> / <span class='no'>e</span>[<span class='no'>i</span>,<span class='no'>j</span>]
<span class='no'>chisquare_value</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>y</span>)

<span class='fu'><a href='as.VCorpus.html'>as</a></span>(<span class='no'>f</span>, <span class='st'>"data.table"</span>)[<span class='no'>word</span> <span class='kw'>==</span> <span class='st'>"Weg"</span>]<span class='kw'>[[</span><span class='st'>"chisquare"</span>]]
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Andreas Blaette.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


